# 線上自動影片轉字幕程式

## 介紹

這是一個線上自動將影片轉換為字幕（SRT 格式）的工具。使用者可以上傳影片檔案，透過 OpenAI 的 Whisper 語音辨識模型，自動生成對應的字幕檔案。本工具支援大部分常見的影片格式，並能夠處理大型檔案（大於 25MB）。

## 功能特點

- **自動語音辨識**：利用 OpenAI 的 Whisper 模型，將影片中的語音內容轉換為文字。
- **字幕生成**：自動生成 SRT 格式的字幕檔案，方便在各種播放器中使用。
- **大型檔案處理**：對於大於 25MB 的檔案，程式會自動將音訊切割為 2 分鐘的片段進行處理。
- **Prompt 引導**：使用者可輸入提示詞（Prompt），以引導模型更精確地進行語音辨識。
- **繁體中文轉換**：自動將辨識結果中的簡體字轉換為繁體字，適合繁體中文使用者。
- **多檔案處理**：支援同時上傳多個影片檔案，依序進行處理。
- **進度顯示**：在處理過程中，顯示每個檔案的處理進度和預計花費。

## 使用說明

### 先決條件

- **OpenAI API Key**：使用此工具需要您擁有有效的 OpenAI API Key。若尚未申請，請前往 [OpenAI 官方網站](https://platform.openai.com/account/api-keys) 申請。

### 操作步驟

1. **取得程式**

   - 下載並解壓縮此專案，確保包含以下檔案：
     - `index.html`
     - `script.js`

2. **開啟網頁**

   - 使用現代瀏覽器（如 Chrome、Firefox、Edge 等）開啟 `index.html`。

3. **輸入 OpenAI API Key**

   - 在頁面上找到「請輸入您的 OpenAI API Key」欄位，輸入您的 API Key。

4. **輸入提示詞（可選）**

   - 在「請輸入提示詞（Prompt）」欄位中，可輸入引導模型的提示詞，以提高辨識準確度。此步驟為可選。

5. **上傳影片檔案**

   - 點擊「上傳影片檔案」按鈕，選擇您要轉換的影片檔案。您可以一次選擇多個檔案。

6. **開始辨識**

   - 確認已輸入 API Key 且已選擇影片檔案後，點擊「開始辨識」按鈕。
   - 程式將依序處理每個檔案，您可以在頁面上看到處理進度和預計花費。

7. **下載字幕檔案**

   - 當處理完成後，瀏覽器將自動下載生成的 SRT 字幕檔案，檔名與原影片檔案相同但副檔名為 `.srt`。

8. **播放影片**

   - 使用支援 SRT 字幕的播放器（如 VLC）打開影片，將下載的字幕檔案與影片檔案放在同一資料夾中(字幕檔與影片檔名需相同)，即可顯示字幕。

9. **手動修改字幕（可選）**

   - 若有需要，您可以手動修改字幕檔案，以符合您的需求。
   - 建議使用 [Subtitle Edit](https://www.nikse.dk/subtitleedit) 等專業字幕編輯軟體進行修改。

## 注意事項

- **費用計算**

  - 使用 OpenAI API 進行語音辨識會產生費用，費用計算方式為每分鐘 $0.006 美元。
  - 程式會預先計算每個影片的預計花費，請確認您的帳戶有足夠的餘額。

- **檔案大小限制**

  - 單個檔案的大小上限為 25MB。對於大於 25MB 的檔案，程式會自動將音訊切割為 2 分鐘的片段進行處理。

- **隱私與安全**

  - 您的 API Key 只會在本地瀏覽器中使用，不會傳送至任何其他伺服器。
  - 上傳的影片檔案僅用於語音辨識，不會存儲或分享。

- **瀏覽器支援**

  - 建議使用最新版本的現代瀏覽器，以確保所有功能正常運作。

## 技術細節

- **OpenAI Whisper 模型**

  - 使用 OpenAI 提供的 `whisper-1` 模型進行語音辨識。
  - API 文件詳見 [OpenAI API Reference](https://platform.openai.com/docs/api-reference/audio/create)。

- **OpenCC 繁簡轉換**

  - 利用 `OpenCC.js` 庫，將辨識結果中的簡體中文轉換為繁體中文。
  - 開源項目地址：[OpenCC](https://github.com/BYVoid/OpenCC)。

- **音訊處理**

  - 對於大於 25MB 的檔案，使用 Web Audio API 進行音訊解碼、切割與處理。
  - 將 `AudioBuffer` 轉換為 WAV 格式，方便上傳至 OpenAI API。

- **進度管理**

  - 使用 JavaScript 的 Promise 和 async/await，實現對多個檔案的同步處理和進度更新。

## 常見問題

### Q1：為何需要 OpenAI API Key？

A1：本工具使用 OpenAI 的 Whisper 模型進行語音辨識，API Key 用於驗證您的身份並計算使用費用。

### Q2：如何取得 OpenAI API Key？

A2：請前往 [OpenAI 官方網站](https://platform.openai.com/account/api-keys)，登入後即可在帳戶設定中生成新的 API Key。

### Q3：處理大型檔案時，速度較慢怎麼辦？

A3：由於大型檔案需要切割並逐段上傳處理，速度可能較慢，請耐心等待。

### Q4：為何辨識結果有錯誤或不完整？

A4：語音辨識的準確度取決於音訊品質、背景雜音等因素。您可以嘗試提供提示詞（Prompt）以提高準確度。
